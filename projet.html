<!DOCTYPE html>
<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="logo.png">
        <title>AIGames</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="HTMCCS.css">
        <script type="text/javascript" src="JavaAIGames.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css">
    </head>
    <body class="bodyG">
        <main>
            <a href="index.html">
            <button id="accueil">Home</button></a>
            <a href="jeux.html">
            <button id="jeux">Project</button></a>
            <a href="contact.html">
            <button id="contact">Contact</button></a>
            <a href="index.html"><img id="logo" src="https://www.tme-composites.com/wp-content/uploads/2022/03/LOGO-FR.png"/></a>
            <button id="projet2">Games</button>
            <form action="https://www.google.com/search" method="get" id="form-search">
                <input id="scearch" type="text" name="q"/>
            </form>
        </main>
        <hr id="hr" color="rgba(153, 15, 15, 0.829)"/>

        <div class="hamburger-menu" title="Setting">
            <input id="menu__toggle" type="checkbox"/>
            <label class="menu__btn" for="menu__toggle">
            <span></span>
            </label>
        
          <ul class="menu__box">
              <li>
                <label class="toggle">
                    <input type="checkbox" name="toggle" id="click" onclick ="darkP()">
                    <span class="tick"></span>
                </label>
            </li>
            <li><a class="menu__item"><i class="fa fa-language" aria-hidden="true"></i>     Language
                <select class="selectLang" id="lan" onchange="changeP()">
                  <option value="1">English</option>
                  <option value="2">Français</option>
                  <option value="3">Español</option>
                  <option value="4">Chinese</option>
                </select></a>
            </li>
              <li>
                <input id="ratting" type="checkbox"/>
                <label for="ratting" class="hamburger-menu" id="rattingLogo">
                    <a class="menu__item"><i class="fa fa-star" aria-hidden="true"></i>       Ratting</a>
                </label>
                <div class="rattingConta">
                    <label for="ratting" id="crossClose" class="hamburger-menu" title="Close">
                        <i class="fa fa-times" aria-hidden="true"></i><span></span></label>
                    <div class="feedback">
                    <div class="rating">
                        <input type="radio" name="rating" id="rating-5">
                        <label for="rating-5"></label>
                        <input type="radio" name="rating" id="rating-4">
                        <label for="rating-4"></label>
                        <input type="radio" name="rating" id="rating-3">
                        <label for="rating-3"></label>
                        <input type="radio" name="rating" id="rating-2">
                        <label for="rating-2"></label>
                        <input type="radio" name="rating" id="rating-1">
                        <label for="rating-1"></label>
                        <div class="emoji-wrapper">
                        <div class="emoji">
                            <svg class="rating-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                            <path d="M512 256c0 141.44-114.64 256-256 256-80.48 0-152.32-37.12-199.28-95.28 43.92 35.52 99.84 56.72 160.72 56.72 141.36 0 256-114.56 256-256 0-60.88-21.2-116.8-56.72-160.72C474.8 103.68 512 175.52 512 256z" fill="#f4c534"/>
                            <ellipse transform="scale(-1) rotate(31.21 715.433 -595.455)" cx="166.318" cy="199.829" rx="56.146" ry="56.13" fill="#fff"/>
                            <ellipse transform="rotate(-148.804 180.87 175.82)" cx="180.871" cy="175.822" rx="28.048" ry="28.08" fill="#3e4347"/>
                            <ellipse transform="rotate(-113.778 194.434 165.995)" cx="194.433" cy="165.993" rx="8.016" ry="5.296" fill="#5a5f63"/>
                            <ellipse transform="scale(-1) rotate(31.21 715.397 -1237.664)" cx="345.695" cy="199.819" rx="56.146" ry="56.13" fill="#fff"/>
                            <ellipse transform="rotate(-148.804 360.25 175.837)" cx="360.252" cy="175.84" rx="28.048" ry="28.08" fill="#3e4347"/>
                            <ellipse transform="scale(-1) rotate(66.227 254.508 -573.138)" cx="373.794" cy="165.987" rx="8.016" ry="5.296" fill="#5a5f63"/>
                            <path d="M370.56 344.4c0 7.696-6.224 13.92-13.92 13.92H155.36c-7.616 0-13.92-6.224-13.92-13.92s6.304-13.92 13.92-13.92h201.296c7.696.016 13.904 6.224 13.904 13.92z" fill="#3e4347"/>
                        </svg>
                            <svg class="rating-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                            <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                            <path d="M328.4 428a92.8 92.8 0 0 0-145-.1 6.8 6.8 0 0 1-12-5.8 86.6 86.6 0 0 1 84.5-69 86.6 86.6 0 0 1 84.7 69.8c1.3 6.9-7.7 10.6-12.2 5.1z" fill="#3e4347"/>
                            <path d="M269.2 222.3c5.3 62.8 52 113.9 104.8 113.9 52.3 0 90.8-51.1 85.6-113.9-2-25-10.8-47.9-23.7-66.7-4.1-6.1-12.2-8-18.5-4.2a111.8 111.8 0 0 1-60.1 16.2c-22.8 0-42.1-5.6-57.8-14.8-6.8-4-15.4-1.5-18.9 5.4-9 18.2-13.2 40.3-11.4 64.1z" fill="#f4c534"/>
                            <path d="M357 189.5c25.8 0 47-7.1 63.7-18.7 10 14.6 17 32.1 18.7 51.6 4 49.6-26.1 89.7-67.5 89.7-41.6 0-78.4-40.1-82.5-89.7A95 95 0 0 1 298 174c16 9.7 35.6 15.5 59 15.5z" fill="#fff"/>
                            <path d="M396.2 246.1a38.5 38.5 0 0 1-38.7 38.6 38.5 38.5 0 0 1-38.6-38.6 38.6 38.6 0 1 1 77.3 0z" fill="#3e4347"/>
                            <path d="M380.4 241.1c-3.2 3.2-9.9 1.7-14.9-3.2-4.8-4.8-6.2-11.5-3-14.7 3.3-3.4 10-2 14.9 2.9 4.9 5 6.4 11.7 3 15z" fill="#fff"/>
                            <path d="M242.8 222.3c-5.3 62.8-52 113.9-104.8 113.9-52.3 0-90.8-51.1-85.6-113.9 2-25 10.8-47.9 23.7-66.7 4.1-6.1 12.2-8 18.5-4.2 16.2 10.1 36.2 16.2 60.1 16.2 22.8 0 42.1-5.6 57.8-14.8 6.8-4 15.4-1.5 18.9 5.4 9 18.2 13.2 40.3 11.4 64.1z" fill="#f4c534"/>
                            <path d="M155 189.5c-25.8 0-47-7.1-63.7-18.7-10 14.6-17 32.1-18.7 51.6-4 49.6 26.1 89.7 67.5 89.7 41.6 0 78.4-40.1 82.5-89.7A95 95 0 0 0 214 174c-16 9.7-35.6 15.5-59 15.5z" fill="#fff"/>
                            <path d="M115.8 246.1a38.5 38.5 0 0 0 38.7 38.6 38.5 38.5 0 0 0 38.6-38.6 38.6 38.6 0 1 0-77.3 0z" fill="#3e4347"/>
                            <path d="M131.6 241.1c3.2 3.2 9.9 1.7 14.9-3.2 4.8-4.8 6.2-11.5 3-14.7-3.3-3.4-10-2-14.9 2.9-4.9 5-6.4 11.7-3 15z" fill="#fff"/>
                        </svg>
                            <svg class="rating-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                            <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                            <path d="M336.6 403.2c-6.5 8-16 10-25.5 5.2a117.6 117.6 0 0 0-110.2 0c-9.4 4.9-19 3.3-25.6-4.6-6.5-7.7-4.7-21.1 8.4-28 45.1-24 99.5-24 144.6 0 13 7 14.8 19.7 8.3 27.4z" fill="#3e4347"/>
                            <path d="M276.6 244.3a79.3 79.3 0 1 1 158.8 0 79.5 79.5 0 1 1-158.8 0z" fill="#fff"/>
                            <circle cx="340" cy="260.4" r="36.2" fill="#3e4347"/>
                            <g fill="#fff">
                            <ellipse transform="rotate(-135 326.4 246.6)" cx="326.4" cy="246.6" rx="6.5" ry="10"/>
                            <path d="M231.9 244.3a79.3 79.3 0 1 0-158.8 0 79.5 79.5 0 1 0 158.8 0z"/>
                            </g>
                            <circle cx="168.5" cy="260.4" r="36.2" fill="#3e4347"/>
                            <ellipse transform="rotate(-135 182.1 246.7)" cx="182.1" cy="246.7" rx="10" ry="6.5" fill="#fff"/>
                        </svg>
                            <svg class="rating-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                    <path d="M407.7 352.8a163.9 163.9 0 0 1-303.5 0c-2.3-5.5 1.5-12 7.5-13.2a780.8 780.8 0 0 1 288.4 0c6 1.2 9.9 7.7 7.6 13.2z" fill="#3e4347"/>
                    <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                    <g fill="#fff">
                        <path d="M115.3 339c18.2 29.6 75.1 32.8 143.1 32.8 67.1 0 124.2-3.2 143.2-31.6l-1.5-.6a780.6 780.6 0 0 0-284.8-.6z"/>
                        <ellipse cx="356.4" cy="205.3" rx="81.1" ry="81"/>
                    </g>
                    <ellipse cx="356.4" cy="205.3" rx="44.2" ry="44.2" fill="#3e4347"/>
                    <g fill="#fff">
                        <ellipse transform="scale(-1) rotate(45 454 -906)" cx="375.3" cy="188.1" rx="12" ry="8.1"/>
                        <ellipse cx="155.6" cy="205.3" rx="81.1" ry="81"/>
                    </g>
                    <ellipse cx="155.6" cy="205.3" rx="44.2" ry="44.2" fill="#3e4347"/>
                    <ellipse transform="scale(-1) rotate(45 454 -421.3)" cx="174.5" cy="188" rx="12" ry="8.1" fill="#fff"/>
                    </svg>
                        <svg class="rating-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <circle cx="256" cy="256" r="256" fill="#ffd93b"/>
                            <path d="M512 256A256 256 0 0 1 56.7 416.7a256 256 0 0 0 360-360c58.1 47 95.3 118.8 95.3 199.3z" fill="#f4c534"/>
                            <path d="M232.3 201.3c0 49.2-74.3 94.2-74.3 94.2s-74.4-45-74.4-94.2a38 38 0 0 1 74.4-11.1 38 38 0 0 1 74.3 11.1z" fill="#e24b4b"/>
                            <path d="M96.1 173.3a37.7 37.7 0 0 0-12.4 28c0 49.2 74.3 94.2 74.3 94.2C80.2 229.8 95.6 175.2 96 173.3z" fill="#d03f3f"/>
                            <path d="M215.2 200c-3.6 3-9.8 1-13.8-4.1-4.2-5.2-4.6-11.5-1.2-14.1 3.6-2.8 9.7-.7 13.9 4.4 4 5.2 4.6 11.4 1.1 13.8z" fill="#fff"/>
                            <path d="M428.4 201.3c0 49.2-74.4 94.2-74.4 94.2s-74.3-45-74.3-94.2a38 38 0 0 1 74.4-11.1 38 38 0 0 1 74.3 11.1z" fill="#e24b4b"/>
                            <path d="M292.2 173.3a37.7 37.7 0 0 0-12.4 28c0 49.2 74.3 94.2 74.3 94.2-77.8-65.7-62.4-120.3-61.9-122.2z" fill="#d03f3f"/>
                            <path d="M411.3 200c-3.6 3-9.8 1-13.8-4.1-4.2-5.2-4.6-11.5-1.2-14.1 3.6-2.8 9.7-.7 13.9 4.4 4 5.2 4.6 11.4 1.1 13.8z" fill="#fff"/>
                            <path d="M381.7 374.1c-30.2 35.9-75.3 64.4-125.7 64.4s-95.4-28.5-125.8-64.2a17.6 17.6 0 0 1 16.5-28.7 627.7 627.7 0 0 0 218.7-.1c16.2-2.7 27 16.1 16.3 28.6z" fill="#3e4347"/>
                            <path d="M256 438.5c25.7 0 50-7.5 71.7-19.5-9-33.7-40.7-43.3-62.6-31.7-29.7 15.8-62.8-4.7-75.6 34.3 20.3 10.4 42.8 17 66.5 17z" fill="#e24b4b"/>
                        </svg>
                            <svg class="rating-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <g fill="#ffd93b">
                            <circle cx="256" cy="256" r="256"/>
                            <path d="M512 256A256 256 0 0 1 56.8 416.7a256 256 0 0 0 360-360c58 47 95.2 118.8 95.2 199.3z"/>
                            </g>
                            <path d="M512 99.4v165.1c0 11-8.9 19.9-19.7 19.9h-187c-13 0-23.5-10.5-23.5-23.5v-21.3c0-12.9-8.9-24.8-21.6-26.7-16.2-2.5-30 10-30 25.5V261c0 13-10.5 23.5-23.5 23.5h-187A19.7 19.7 0 0 1 0 264.7V99.4c0-10.9 8.8-19.7 19.7-19.7h472.6c10.8 0 19.7 8.7 19.7 19.7z" fill="#e9eff4"/>
                            <path d="M204.6 138v88.2a23 23 0 0 1-23 23H58.2a23 23 0 0 1-23-23v-88.3a23 23 0 0 1 23-23h123.4a23 23 0 0 1 23 23z" fill="#45cbea"/>
                            <path d="M476.9 138v88.2a23 23 0 0 1-23 23H330.3a23 23 0 0 1-23-23v-88.3a23 23 0 0 1 23-23h123.4a23 23 0 0 1 23 23z" fill="#e84d88"/>
                            <g fill="#38c0dc">
                            <path d="M95.2 114.9l-60 60v15.2l75.2-75.2zM123.3 114.9L35.1 203v23.2c0 1.8.3 3.7.7 5.4l116.8-116.7h-29.3z"/>
                            </g>
                            <g fill="#d23f77">
                            <path d="M373.3 114.9l-66 66V196l81.3-81.2zM401.5 114.9l-94.1 94v17.3c0 3.5.8 6.8 2.2 9.8l121.1-121.1h-29.2z"/>
                            </g>
                            <path d="M329.5 395.2c0 44.7-33 81-73.4 81-40.7 0-73.5-36.3-73.5-81s32.8-81 73.5-81c40.5 0 73.4 36.3 73.4 81z" fill="#3e4347"/>
                            <path d="M256 476.2a70 70 0 0 0 53.3-25.5 34.6 34.6 0 0 0-58-25 34.4 34.4 0 0 0-47.8 26 69.9 69.9 0 0 0 52.6 24.5z" fill="#e24b4b"/>
                            <path d="M290.3 434.8c-1 3.4-5.8 5.2-11 3.9s-8.4-5.1-7.4-8.7c.8-3.3 5.7-5 10.7-3.8 5.1 1.4 8.5 5.3 7.7 8.6z" fill="#fff" opacity=".2"/>
                        </svg>
                        </div>
                        </div>
                    </div>
                    <h2 class="rateWeb">Rate this website</h3>
                    </div>
                </div>
            </li>
            <li><a class="menu__item" href="" target="_blank"><i class="fa fa-info" aria-hidden="true"></i>   Help</a></li>
          </ul>
        </div>

        <input id="music" type="checkbox"/>
        <label for="music" class="hamburger-menu" title="Music">
        <i class="fa fa-music" id="musicLogo" aria-hidden="true"></i><span></span></label>
        <ul class="menu__box2">
            <audio controls class="audio"><source src="music/soft_cinematic.mp3"></audio>
            <audio controls class="audio"><source src="music/Fantasy1.mp3"></audio>
            <audio controls class="audio"><source src="music/hippop1.mp3"></audio>
            <audio controls class="audio"><source src="music/assassin_music.mp3"></audio>
            <audio controls class="audio"><source src="music/synthwava1.mp3"></audio>
            <audio controls class="audio"><source src="music/trap_ensemble.mp3"></audio>      
            <audio controls class="audio"><source src="music/afro_house.mp3"></audio>
            <audio controls class="audio"><source src="music/Electronic1.mp3"></audio>    
        </ul>


        <select class="GameSelect" id="GameSelect2" onchange="SelecteGame()">
            <option value="1">Tic Tac Toe</option>
            <option value="2">Power 4</option>
            <option value="3">Bille</option>
            <option value="4">Snake</option>
            <option value="5">Choice</option>
        </select>


        
        <div class="tic-tac-toe">
            <input class="player-1 left first-column top first-row first-diagonal turn-1" id="block1-1-1" type="radio"/>
            <label class="turn-1" for="block1-1-1"></label>
            <input class="player-1 middle second-column top first-row turn-1" id="block1-1-2" type="radio"/>
            <label class="turn-1" for="block1-1-2"></label>
            <input class="player-1 right third-column top first-row second-diagonal turn-1" id="block1-1-3" type="radio"/>
            <label class="turn-1" for="block1-1-3"></label>
            <input class="player-1 left first-column center second-row turn-1" id="block1-2-1" type="radio"/>
            <label class="turn-1" for="block1-2-1"></label>
            <input class="player-1 middle second-column center second-row first-diagonal second-diagonal turn-1" id="block1-2-2" type="radio"/>
            <label class="turn-1" for="block1-2-2"></label>
            <input class="player-1 right third-column center second-row turn-1" id="block1-2-3" type="radio"/>
            <label class="turn-1" for="block1-2-3"></label>
            <input class="player-1 left first-column bottom third-row second-diagonal turn-1" id="block1-3-1" type="radio"/>
            <label class="turn-1" for="block1-3-1"></label>
            <input class="player-1 middle second-column bottom third-row turn-1" id="block1-3-2" type="radio"/>
            <label class="turn-1" for="block1-3-2"></label>
            <input class="player-1 right third-column bottom third-row first-diagonal turn-1" id="block1-3-3" type="radio"/>
            <label class="turn-1" for="block1-3-3"></label>
            <input class="player-2 left first-column top first-row first-diagonal turn-2" id="block2-1-1" type="radio"/>
            <label class="turn-2" for="block2-1-1"></label>
            <input class="player-2 middle second-column top first-row turn-2" id="block2-1-2" type="radio"/>
            <label class="turn-2" for="block2-1-2"></label>
            <input class="player-2 right third-column top first-row second-diagonal turn-2" id="block2-1-3" type="radio"/>
            <label class="turn-2" for="block2-1-3"></label>
            <input class="player-2 left first-column center second-row turn-2" id="block2-2-1" type="radio"/>
            <label class="turn-2" for="block2-2-1"></label>
            <input class="player-2 middle second-column center second-row first-diagonal second-diagonal turn-2" id="block2-2-2" type="radio"/>
            <label class="turn-2" for="block2-2-2"></label>
            <input class="player-2 right third-column center second-row turn-2" id="block2-2-3" type="radio"/>
            <label class="turn-2" for="block2-2-3"></label>
            <input class="player-2 left first-column bottom third-row second-diagonal turn-2" id="block2-3-1" type="radio"/>
            <label class="turn-2" for="block2-3-1"></label>
            <input class="player-2 middle second-column bottom third-row turn-2" id="block2-3-2" type="radio"/>
            <label class="turn-2" for="block2-3-2"></label>
            <input class="player-2 right third-column bottom third-row first-diagonal turn-2" id="block2-3-3" type="radio"/>
            <label class="turn-2" for="block2-3-3"></label>
            <input class="player-1 left first-column top first-row first-diagonal turn-3" id="block3-1-1" type="radio"/>
            <label class="turn-3" for="block3-1-1"></label>
            <input class="player-1 middle second-column top first-row turn-3" id="block3-1-2" type="radio"/>
            <label class="turn-3" for="block3-1-2"></label>
            <input class="player-1 right third-column top first-row second-diagonal turn-3" id="block3-1-3" type="radio"/>
            <label class="turn-3" for="block3-1-3"></label>
            <input class="player-1 left first-column center second-row turn-3" id="block3-2-1" type="radio"/>
            <label class="turn-3" for="block3-2-1"></label>
            <input class="player-1 middle second-column center second-row first-diagonal second-diagonal turn-3" id="block3-2-2" type="radio"/>
            <label class="turn-3" for="block3-2-2"></label>
            <input class="player-1 right third-column center second-row turn-3" id="block3-2-3" type="radio"/>
            <label class="turn-3" for="block3-2-3"></label>
            <input class="player-1 left first-column bottom third-row second-diagonal turn-3" id="block3-3-1" type="radio"/>
            <label class="turn-3" for="block3-3-1"></label>
            <input class="player-1 middle second-column bottom third-row turn-3" id="block3-3-2" type="radio"/>
            <label class="turn-3" for="block3-3-2"></label>
            <input class="player-1 right third-column bottom third-row first-diagonal turn-3" id="block3-3-3" type="radio"/>
            <label class="turn-3" for="block3-3-3"></label>
            <input class="player-2 left first-column top first-row first-diagonal turn-4" id="block4-1-1" type="radio"/>
            <label class="turn-4" for="block4-1-1"></label>
            <input class="player-2 middle second-column top first-row turn-4" id="block4-1-2" type="radio"/>
            <label class="turn-4" for="block4-1-2"></label>
            <input class="player-2 right third-column top first-row second-diagonal turn-4" id="block4-1-3" type="radio"/>
            <label class="turn-4" for="block4-1-3"></label>
            <input class="player-2 left first-column center second-row turn-4" id="block4-2-1" type="radio"/>
            <label class="turn-4" for="block4-2-1"></label>
            <input class="player-2 middle second-column center second-row first-diagonal second-diagonal turn-4" id="block4-2-2" type="radio"/>
            <label class="turn-4" for="block4-2-2"></label>
            <input class="player-2 right third-column center second-row turn-4" id="block4-2-3" type="radio"/>
            <label class="turn-4" for="block4-2-3"></label>
            <input class="player-2 left first-column bottom third-row second-diagonal turn-4" id="block4-3-1" type="radio"/>
            <label class="turn-4" for="block4-3-1"></label>
            <input class="player-2 middle second-column bottom third-row turn-4" id="block4-3-2" type="radio"/>
            <label class="turn-4" for="block4-3-2"></label>
            <input class="player-2 right third-column bottom third-row first-diagonal turn-4" id="block4-3-3" type="radio"/>
            <label class="turn-4" for="block4-3-3"></label>
            <input class="player-1 left first-column top first-row first-diagonal turn-5" id="block5-1-1" type="radio"/>
            <label class="turn-5" for="block5-1-1"></label>
            <input class="player-1 middle second-column top first-row turn-5" id="block5-1-2" type="radio"/>
            <label class="turn-5" for="block5-1-2"></label>
            <input class="player-1 right third-column top first-row second-diagonal turn-5" id="block5-1-3" type="radio"/>
            <label class="turn-5" for="block5-1-3"></label>
            <input class="player-1 left first-column center second-row turn-5" id="block5-2-1" type="radio"/>
            <label class="turn-5" for="block5-2-1"></label>
            <input class="player-1 middle second-column center second-row first-diagonal second-diagonal turn-5" id="block5-2-2" type="radio"/>
            <label class="turn-5" for="block5-2-2"></label>
            <input class="player-1 right third-column center second-row turn-5" id="block5-2-3" type="radio"/>
            <label class="turn-5" for="block5-2-3"></label>
            <input class="player-1 left first-column bottom third-row second-diagonal turn-5" id="block5-3-1" type="radio"/>
            <label class="turn-5" for="block5-3-1"></label>
            <input class="player-1 middle second-column bottom third-row turn-5" id="block5-3-2" type="radio"/>
            <label class="turn-5" for="block5-3-2"></label>
            <input class="player-1 right third-column bottom third-row first-diagonal turn-5" id="block5-3-3" type="radio"/>
            <label class="turn-5" for="block5-3-3"></label>
            <input class="player-2 left first-column top first-row first-diagonal turn-6" id="block6-1-1" type="radio"/>
            <label class="turn-6" for="block6-1-1"></label>
            <input class="player-2 middle second-column top first-row turn-6" id="block6-1-2" type="radio"/>
            <label class="turn-6" for="block6-1-2"></label>
            <input class="player-2 right third-column top first-row second-diagonal turn-6" id="block6-1-3" type="radio"/>
            <label class="turn-6" for="block6-1-3"></label>
            <input class="player-2 left first-column center second-row turn-6" id="block6-2-1" type="radio"/>
            <label class="turn-6" for="block6-2-1"></label>
            <input class="player-2 middle second-column center second-row first-diagonal second-diagonal turn-6" id="block6-2-2" type="radio"/>
            <label class="turn-6" for="block6-2-2"></label>
            <input class="player-2 right third-column center second-row turn-6" id="block6-2-3" type="radio"/>
            <label class="turn-6" for="block6-2-3"></label>
            <input class="player-2 left first-column bottom third-row second-diagonal turn-6" id="block6-3-1" type="radio"/>
            <label class="turn-6" for="block6-3-1"></label>
            <input class="player-2 middle second-column bottom third-row turn-6" id="block6-3-2" type="radio"/>
            <label class="turn-6" for="block6-3-2"></label>
            <input class="player-2 right third-column bottom third-row first-diagonal turn-6" id="block6-3-3" type="radio"/>
            <label class="turn-6" for="block6-3-3"></label>
            <input class="player-1 left first-column top first-row first-diagonal turn-7" id="block7-1-1" type="radio"/>
            <label class="turn-7" for="block7-1-1"></label>
            <input class="player-1 middle second-column top first-row turn-7" id="block7-1-2" type="radio"/>
            <label class="turn-7" for="block7-1-2"></label>
            <input class="player-1 right third-column top first-row second-diagonal turn-7" id="block7-1-3" type="radio"/>
            <label class="turn-7" for="block7-1-3"></label>
            <input class="player-1 left first-column center second-row turn-7" id="block7-2-1" type="radio"/>
            <label class="turn-7" for="block7-2-1"></label>
            <input class="player-1 middle second-column center second-row first-diagonal second-diagonal turn-7" id="block7-2-2" type="radio"/>
            <label class="turn-7" for="block7-2-2"></label>
            <input class="player-1 right third-column center second-row turn-7" id="block7-2-3" type="radio"/>
            <label class="turn-7" for="block7-2-3"></label>
            <input class="player-1 left first-column bottom third-row second-diagonal turn-7" id="block7-3-1" type="radio"/>
            <label class="turn-7" for="block7-3-1"></label>
            <input class="player-1 middle second-column bottom third-row turn-7" id="block7-3-2" type="radio"/>
            <label class="turn-7" for="block7-3-2"></label>
            <input class="player-1 right third-column bottom third-row first-diagonal turn-7" id="block7-3-3" type="radio"/>
            <label class="turn-7" for="block7-3-3"></label>
            <input class="player-2 left first-column top first-row first-diagonal turn-8" id="block8-1-1" type="radio"/>
            <label class="turn-8" for="block8-1-1"></label>
            <input class="player-2 middle second-column top first-row turn-8" id="block8-1-2" type="radio"/>
            <label class="turn-8" for="block8-1-2"></label>
            <input class="player-2 right third-column top first-row second-diagonal turn-8" id="block8-1-3" type="radio"/>
            <label class="turn-8" for="block8-1-3"></label>
            <input class="player-2 left first-column center second-row turn-8" id="block8-2-1" type="radio"/>
            <label class="turn-8" for="block8-2-1"></label>
            <input class="player-2 middle second-column center second-row first-diagonal second-diagonal turn-8" id="block8-2-2" type="radio"/>
            <label class="turn-8" for="block8-2-2"></label>
            <input class="player-2 right third-column center second-row turn-8" id="block8-2-3" type="radio"/>
            <label class="turn-8" for="block8-2-3"></label>
            <input class="player-2 left first-column bottom third-row second-diagonal turn-8" id="block8-3-1" type="radio"/>
            <label class="turn-8" for="block8-3-1"></label>
            <input class="player-2 middle second-column bottom third-row turn-8" id="block8-3-2" type="radio"/>
            <label class="turn-8" for="block8-3-2"></label>
            <input class="player-2 right third-column bottom third-row first-diagonal turn-8" id="block8-3-3" type="radio"/>
            <label class="turn-8" for="block8-3-3"></label>
            <input class="player-1 left first-column top first-row first-diagonal turn-9" id="block9-1-1" type="radio"/>
            <label class="turn-9" for="block9-1-1"></label>
            <input class="player-1 middle second-column top first-row turn-9" id="block9-1-2" type="radio"/>
            <label class="turn-9" for="block9-1-2"></label>
            <input class="player-1 right third-column top first-row second-diagonal turn-9" id="block9-1-3" type="radio"/>
            <label class="turn-9" for="block9-1-3"></label>
            <input class="player-1 left first-column center second-row turn-9" id="block9-2-1" type="radio"/>
            <label class="turn-9" for="block9-2-1"></label>
            <input class="player-1 middle second-column center second-row first-diagonal second-diagonal turn-9" id="block9-2-2" type="radio"/>
            <label class="turn-9" for="block9-2-2"></label>
            <input class="player-1 right third-column center second-row turn-9" id="block9-2-3" type="radio"/>
            <label class="turn-9" for="block9-2-3"></label>
            <input class="player-1 left first-column bottom third-row second-diagonal turn-9" id="block9-3-1" type="radio"/>
            <label class="turn-9" for="block9-3-1"></label>
            <input class="player-1 middle second-column bottom third-row turn-9" id="block9-3-2" type="radio"/>
            <label class="turn-9" for="block9-3-2"></label>
            <input class="player-1 right third-column bottom third-row first-diagonal turn-9" id="block9-3-3" type="radio"/>
            <label class="turn-9" for="block9-3-3"></label>
            <div class="end">
                <h3></h3><a href="">Restart</a>
            </div>
        </div>



        <div class="power4">
            <form>
                <input class="rd" type="radio" id="rd-1-42" name="rd42"/>
                <input class="rd" type="radio" id="rd-2-42" name="rd42"/>
                <input class="rd" type="radio" id="rd-1-41" name="rd41"/>
                <input class="rd" type="radio" id="rd-2-41" name="rd41"/>
                <input class="rd" type="radio" id="rd-1-40" name="rd40"/>
                <input class="rd" type="radio" id="rd-2-40" name="rd40"/>
                <input class="rd" type="radio" id="rd-1-39" name="rd39"/>
                <input class="rd" type="radio" id="rd-2-39" name="rd39"/>
                <input class="rd" type="radio" id="rd-1-38" name="rd38"/>
                <input class="rd" type="radio" id="rd-2-38" name="rd38"/>
                <input class="rd" type="radio" id="rd-1-37" name="rd37"/>
                <input class="rd" type="radio" id="rd-2-37" name="rd37"/>
                <input class="rd" type="radio" id="rd-1-36" name="rd36"/>
                <input class="rd" type="radio" id="rd-2-36" name="rd36"/>
                <input class="rd" type="radio" id="rd-1-35" name="rd35"/>
                <input class="rd" type="radio" id="rd-2-35" name="rd35"/>
                <input class="rd" type="radio" id="rd-1-34" name="rd34"/>
                <input class="rd" type="radio" id="rd-2-34" name="rd34"/>
                <input class="rd" type="radio" id="rd-1-33" name="rd33"/>
                <input class="rd" type="radio" id="rd-2-33" name="rd33"/>
                <input class="rd" type="radio" id="rd-1-32" name="rd32"/>
                <input class="rd" type="radio" id="rd-2-32" name="rd32"/>
                <input class="rd" type="radio" id="rd-1-31" name="rd31"/>
                <input class="rd" type="radio" id="rd-2-31" name="rd31"/>
                <input class="rd" type="radio" id="rd-1-30" name="rd30"/>
                <input class="rd" type="radio" id="rd-2-30" name="rd30"/>
                <input class="rd" type="radio" id="rd-1-29" name="rd29"/>
                <input class="rd" type="radio" id="rd-2-29" name="rd29"/>
                <input class="rd" type="radio" id="rd-1-28" name="rd28"/>
                <input class="rd" type="radio" id="rd-2-28" name="rd28"/>
                <input class="rd" type="radio" id="rd-1-27" name="rd27"/>
                <input class="rd" type="radio" id="rd-2-27" name="rd27"/>
                <input class="rd" type="radio" id="rd-1-26" name="rd26"/>
                <input class="rd" type="radio" id="rd-2-26" name="rd26"/>
                <input class="rd" type="radio" id="rd-1-25" name="rd25"/>
                <input class="rd" type="radio" id="rd-2-25" name="rd25"/>
                <input class="rd" type="radio" id="rd-1-24" name="rd24"/>
                <input class="rd" type="radio" id="rd-2-24" name="rd24"/>
                <input class="rd" type="radio" id="rd-1-23" name="rd23"/>
                <input class="rd" type="radio" id="rd-2-23" name="rd23"/>
                <input class="rd" type="radio" id="rd-1-22" name="rd22"/>
                <input class="rd" type="radio" id="rd-2-22" name="rd22"/>
                <input class="rd" type="radio" id="rd-1-21" name="rd21"/>
                <input class="rd" type="radio" id="rd-2-21" name="rd21"/>
                <input class="rd" type="radio" id="rd-1-20" name="rd20"/>
                <input class="rd" type="radio" id="rd-2-20" name="rd20"/>
                <input class="rd" type="radio" id="rd-1-19" name="rd19"/>
                <input class="rd" type="radio" id="rd-2-19" name="rd19"/>
                <input class="rd" type="radio" id="rd-1-18" name="rd18"/>
                <input class="rd" type="radio" id="rd-2-18" name="rd18"/>
                <input class="rd" type="radio" id="rd-1-17" name="rd17"/>
                <input class="rd" type="radio" id="rd-2-17" name="rd17"/>
                <input class="rd" type="radio" id="rd-1-16" name="rd16"/>
                <input class="rd" type="radio" id="rd-2-16" name="rd16"/>
                <input class="rd" type="radio" id="rd-1-15" name="rd15"/>
                <input class="rd" type="radio" id="rd-2-15" name="rd15"/>
                <input class="rd" type="radio" id="rd-1-14" name="rd14"/>
                <input class="rd" type="radio" id="rd-2-14" name="rd14"/>
                <input class="rd" type="radio" id="rd-1-13" name="rd13"/>
                <input class="rd" type="radio" id="rd-2-13" name="rd13"/>
                <input class="rd" type="radio" id="rd-1-12" name="rd12"/>
                <input class="rd" type="radio" id="rd-2-12" name="rd12"/>
                <input class="rd" type="radio" id="rd-1-11" name="rd11"/>
                <input class="rd" type="radio" id="rd-2-11" name="rd11"/>
                <input class="rd" type="radio" id="rd-1-10" name="rd10"/>
                <input class="rd" type="radio" id="rd-2-10" name="rd10"/>
                <input class="rd" type="radio" id="rd-1-9" name="rd9"/>
                <input class="rd" type="radio" id="rd-2-9" name="rd9"/>
                <input class="rd" type="radio" id="rd-1-8" name="rd8"/>
                <input class="rd" type="radio" id="rd-2-8" name="rd8"/>
                <input class="rd" type="radio" id="rd-1-7" name="rd7"/>
                <input class="rd" type="radio" id="rd-2-7" name="rd7"/>
                <input class="rd" type="radio" id="rd-1-6" name="rd6"/>
                <input class="rd" type="radio" id="rd-2-6" name="rd6"/>
                <input class="rd" type="radio" id="rd-1-5" name="rd5"/>
                <input class="rd" type="radio" id="rd-2-5" name="rd5"/>
                <input class="rd" type="radio" id="rd-1-4" name="rd4"/>
                <input class="rd" type="radio" id="rd-2-4" name="rd4"/>
                <input class="rd" type="radio" id="rd-1-3" name="rd3"/>
                <input class="rd" type="radio" id="rd-2-3" name="rd3"/>
                <input class="rd" type="radio" id="rd-1-2" name="rd2"/>
                <input class="rd" type="radio" id="rd-2-2" name="rd2"/>
                <input class="rd" type="radio" id="rd-1-1" name="rd1"/>
                <input class="rd" type="radio" id="rd-2-1" name="rd1"/>
                <div id="board">
                    <div class="foot" id="foot-left"></div>
                    <div class="foot" id="foot-right"></div>
                    <div id="tiles">
                    <div class="tile" id="tile1"></div>
                    <div class="tile" id="tile2"></div>
                    <div class="tile" id="tile3"></div>
                    <div class="tile" id="tile4"></div>
                    <div class="tile" id="tile5"></div>
                    <div class="tile" id="tile6"></div>
                    <div class="tile" id="tile7"></div>
                    <div class="tile" id="tile8"></div>
                    <div class="tile" id="tile9"></div>
                    <div class="tile" id="tile10"></div>
                    <div class="tile" id="tile11"></div>
                    <div class="tile" id="tile12"></div>
                    <div class="tile" id="tile13"></div>
                    <div class="tile" id="tile14"></div>
                    <div class="tile" id="tile15"></div>
                    <div class="tile" id="tile16"></div>
                    <div class="tile" id="tile17"></div>
                    <div class="tile" id="tile18"></div>
                    <div class="tile" id="tile19"></div>
                    <div class="tile" id="tile20"></div>
                    <div class="tile" id="tile21"></div>
                    <div class="tile" id="tile22"></div>
                    <div class="tile" id="tile23"></div>
                    <div class="tile" id="tile24"></div>
                    <div class="tile" id="tile25"></div>
                    <div class="tile" id="tile26"></div>
                    <div class="tile" id="tile27"></div>
                    <div class="tile" id="tile28"></div>
                    <div class="tile" id="tile29"></div>
                    <div class="tile" id="tile30"></div>
                    <div class="tile" id="tile31"></div>
                    <div class="tile" id="tile32"></div>
                    <div class="tile" id="tile33"></div>
                    <div class="tile" id="tile34"></div>
                    <div class="tile" id="tile35"></div>
                    <div class="tile" id="tile36"></div>
                    <div class="tile" id="tile37"></div>
                    <div class="tile" id="tile38"></div>
                    <div class="tile" id="tile39"></div>
                    <div class="tile" id="tile40"></div>
                    <div class="tile" id="tile41"></div>
                    <div class="tile" id="tile42"></div>
                    <div class="labels" id="labels1">
                        <label class="lb lb-col-1" for="rd-1-1" id="lb-1-1"></label>
                        <label class="lb lb-col-2" for="rd-1-2" id="lb-1-2"></label>
                        <label class="lb lb-col-3" for="rd-1-3" id="lb-1-3"></label>
                        <label class="lb lb-col-4" for="rd-1-4" id="lb-1-4"></label>
                        <label class="lb lb-col-5" for="rd-1-5" id="lb-1-5"></label>
                        <label class="lb lb-col-6" for="rd-1-6" id="lb-1-6"></label>
                        <label class="lb lb-col-0" for="rd-1-7" id="lb-1-7"></label>
                        <label class="lb lb-col-1" for="rd-1-8" id="lb-1-8"></label>
                        <label class="lb lb-col-2" for="rd-1-9" id="lb-1-9"></label>
                        <label class="lb lb-col-3" for="rd-1-10" id="lb-1-10"></label>
                        <label class="lb lb-col-4" for="rd-1-11" id="lb-1-11"></label>
                        <label class="lb lb-col-5" for="rd-1-12" id="lb-1-12"></label>
                        <label class="lb lb-col-6" for="rd-1-13" id="lb-1-13"></label>
                        <label class="lb lb-col-0" for="rd-1-14" id="lb-1-14"></label>
                        <label class="lb lb-col-1" for="rd-1-15" id="lb-1-15"></label>
                        <label class="lb lb-col-2" for="rd-1-16" id="lb-1-16"></label>
                        <label class="lb lb-col-3" for="rd-1-17" id="lb-1-17"></label>
                        <label class="lb lb-col-4" for="rd-1-18" id="lb-1-18"></label>
                        <label class="lb lb-col-5" for="rd-1-19" id="lb-1-19"></label>
                        <label class="lb lb-col-6" for="rd-1-20" id="lb-1-20"></label>
                        <label class="lb lb-col-0" for="rd-1-21" id="lb-1-21"></label>
                        <label class="lb lb-col-1" for="rd-1-22" id="lb-1-22"></label>
                        <label class="lb lb-col-2" for="rd-1-23" id="lb-1-23"></label>
                        <label class="lb lb-col-3" for="rd-1-24" id="lb-1-24"></label>
                        <label class="lb lb-col-4" for="rd-1-25" id="lb-1-25"></label>
                        <label class="lb lb-col-5" for="rd-1-26" id="lb-1-26"></label>
                        <label class="lb lb-col-6" for="rd-1-27" id="lb-1-27"></label>
                        <label class="lb lb-col-0" for="rd-1-28" id="lb-1-28"></label>
                        <label class="lb lb-col-1" for="rd-1-29" id="lb-1-29"></label>
                        <label class="lb lb-col-2" for="rd-1-30" id="lb-1-30"></label>
                        <label class="lb lb-col-3" for="rd-1-31" id="lb-1-31"></label>
                        <label class="lb lb-col-4" for="rd-1-32" id="lb-1-32"></label>
                        <label class="lb lb-col-5" for="rd-1-33" id="lb-1-33"></label>
                        <label class="lb lb-col-6" for="rd-1-34" id="lb-1-34"></label>
                        <label class="lb lb-col-0" for="rd-1-35" id="lb-1-35"></label>
                        <label class="lb lb-col-1" for="rd-1-36" id="lb-1-36"></label>
                        <label class="lb lb-col-2" for="rd-1-37" id="lb-1-37"></label>
                        <label class="lb lb-col-3" for="rd-1-38" id="lb-1-38"></label>
                        <label class="lb lb-col-4" for="rd-1-39" id="lb-1-39"></label>
                        <label class="lb lb-col-5" for="rd-1-40" id="lb-1-40"></label>
                        <label class="lb lb-col-6" for="rd-1-41" id="lb-1-41"></label>
                        <label class="lb lb-col-0" for="rd-1-42" id="lb-1-42"></label>
                        <div class="hand" id="hand1">
                        <div class="finger-2 finger"></div>
                        <div class="finger-3 finger"></div>
                        <div class="finger-4 finger"></div>
                        <div class="finger-5 finger"></div>
                        <div class="piece"></div>
                        <div class="arm finger"></div>
                        <div class="finger-1 finger"></div>
                        <div class="fist finger"></div>
                        <div class="shirt"></div>
                        </div>
                    </div>
                    <div class="labels" id="labels2">
                        <label class="lb lb-col-1" for="rd-2-1" id="lb-2-1"></label>
                        <label class="lb lb-col-2" for="rd-2-2" id="lb-2-2"></label>
                        <label class="lb lb-col-3" for="rd-2-3" id="lb-2-3"></label>
                        <label class="lb lb-col-4" for="rd-2-4" id="lb-2-4"></label>
                        <label class="lb lb-col-5" for="rd-2-5" id="lb-2-5"></label>
                        <label class="lb lb-col-6" for="rd-2-6" id="lb-2-6"></label>
                        <label class="lb lb-col-0" for="rd-2-7" id="lb-2-7"></label>
                        <label class="lb lb-col-1" for="rd-2-8" id="lb-2-8"></label>
                        <label class="lb lb-col-2" for="rd-2-9" id="lb-2-9"></label>
                        <label class="lb lb-col-3" for="rd-2-10" id="lb-2-10"></label>
                        <label class="lb lb-col-4" for="rd-2-11" id="lb-2-11"></label>
                        <label class="lb lb-col-5" for="rd-2-12" id="lb-2-12"></label>
                        <label class="lb lb-col-6" for="rd-2-13" id="lb-2-13"></label>
                        <label class="lb lb-col-0" for="rd-2-14" id="lb-2-14"></label>
                        <label class="lb lb-col-1" for="rd-2-15" id="lb-2-15"></label>
                        <label class="lb lb-col-2" for="rd-2-16" id="lb-2-16"></label>
                        <label class="lb lb-col-3" for="rd-2-17" id="lb-2-17"></label>
                        <label class="lb lb-col-4" for="rd-2-18" id="lb-2-18"></label>
                        <label class="lb lb-col-5" for="rd-2-19" id="lb-2-19"></label>
                        <label class="lb lb-col-6" for="rd-2-20" id="lb-2-20"></label>
                        <label class="lb lb-col-0" for="rd-2-21" id="lb-2-21"></label>
                        <label class="lb lb-col-1" for="rd-2-22" id="lb-2-22"></label>
                        <label class="lb lb-col-2" for="rd-2-23" id="lb-2-23"></label>
                        <label class="lb lb-col-3" for="rd-2-24" id="lb-2-24"></label>
                        <label class="lb lb-col-4" for="rd-2-25" id="lb-2-25"></label>
                        <label class="lb lb-col-5" for="rd-2-26" id="lb-2-26"></label>
                        <label class="lb lb-col-6" for="rd-2-27" id="lb-2-27"></label>
                        <label class="lb lb-col-0" for="rd-2-28" id="lb-2-28"></label>
                        <label class="lb lb-col-1" for="rd-2-29" id="lb-2-29"></label>
                        <label class="lb lb-col-2" for="rd-2-30" id="lb-2-30"></label>
                        <label class="lb lb-col-3" for="rd-2-31" id="lb-2-31"></label>
                        <label class="lb lb-col-4" for="rd-2-32" id="lb-2-32"></label>
                        <label class="lb lb-col-5" for="rd-2-33" id="lb-2-33"></label>
                        <label class="lb lb-col-6" for="rd-2-34" id="lb-2-34"></label>
                        <label class="lb lb-col-0" for="rd-2-35" id="lb-2-35"></label>
                        <label class="lb lb-col-1" for="rd-2-36" id="lb-2-36"></label>
                        <label class="lb lb-col-2" for="rd-2-37" id="lb-2-37"></label>
                        <label class="lb lb-col-3" for="rd-2-38" id="lb-2-38"></label>
                        <label class="lb lb-col-4" for="rd-2-39" id="lb-2-39"></label>
                        <label class="lb lb-col-5" for="rd-2-40" id="lb-2-40"></label>
                        <label class="lb lb-col-6" for="rd-2-41" id="lb-2-41"></label>
                        <label class="lb lb-col-0" for="rd-2-42" id="lb-2-42"></label>
                        <div class="hand" id="hand2">
                        <div class="finger-2 finger"></div>
                        <div class="finger-3 finger"></div>
                        <div class="finger-4 finger"></div>
                        <div class="finger-5 finger"></div>
                        <div class="piece"></div>
                        <div class="arm finger"></div>
                        <div class="finger-1 finger"></div>
                        <div class="fist finger"></div>
                        <div class="shirt"></div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="popup" id="congratulations">
                    <h1>Congratulations!</h1>
                    <h2>won the game!</h2>
                    <input type="reset" value="Start again!"/>
                </div>
                <div class="popup" id="draw">
                    <h1>You draw!</h1>
                    <h2>No player won the game</h2>
                    <input type="reset" value="Start again!"/>
                </div>
            </form>
        </div>
        

        
        
        <canvas id="canvas"></canvas>
        <script>
            var map = {

            tile_size: 16,

            keys: [
                {id: 0, colour: '#333', solid: 0},
                {id: 1, colour: '#888', solid: 0},
                {id: 2,colour: '#555',solid: 1,bounce: 0.35},
                {id: 3,colour: 'rgba(121, 220, 242, 0.4)',friction: {x: 0.9,y: 0.9},gravity: {x: 0,y: 0.1},jump: 1,fore: 1},
                {id: 4,colour: '#777',jump: 1},
                {id: 5,colour: '#E373FA',solid: 1,bounce: 1.1},
                {id: 6,colour: '#666',solid: 1,bounce: 0},
                {id: 7,colour: '#73C6FA',solid: 0,script: 'change_colour'},
                {id: 8,colour: '#FADF73',solid: 0,script: 'next_level'},
                {id: 9,colour: '#C93232',solid: 0,script: 'death'},
                {id: 10,colour: '#555',solid: 1},
                {id: 11,colour: '#0FF',solid: 0,script: 'unlock'}
            ],

            /* An array representing the map tiles. Each number corresponds to a key */
            data: [
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 6, 6, 6, 6, 6, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 1, 1, 1, 1, 1, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 7, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 4, 2, 2, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2, 2, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 4, 2, 1, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 2, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 2],
                [2, 1, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 2],
                [2, 1, 2, 2, 2, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 2],
                [2, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 8, 1, 1, 1, 2],
                [2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 6, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2],
                [2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 9, 9, 9, 2, 10, 10, 10, 10, 10, 10, 1, 1, 1, 1, 1, 1, 1, 11, 2, 2, 2, 2, 4, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 10, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 2, 1, 1, 1, 1, 1, 1, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 4, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2],
                [2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 6, 6, 6, 2, 2, 2, 2, 2, 2, 6, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
                [2, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 2, 5, 5, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
                [2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 5, 5, 1, 1, 1, 1, 1, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2],
                [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]
            ],

            /* Default gravity of the map */

            gravity: {
                x: 0,
                y: 0.3
            },

            /* Velocity limits */

            vel_limit: {
                x: 2,
                y: 16
            },

            /* Movement speed when the key is pressed */

            movement_speed: {
                jump: 6,
                left: 0.3,
                right: 0.3
            },

            /* The coordinates at which the player spawns and the colour of the player */

            player: {
                x: 2,
                y: 2,
                colour: '#FF9900'
            },

            /* scripts refered to by the "script" variable in the tile keys */

            scripts: {
                /* you can just use "this" instead of your engine variable ("game"), but Codepen doesn't like it */
                change_colour: 'game.player.colour = "#"+(Math.random()*0xFFFFFF<<0).toString(16);',
                /* you could load a new map variable here */
                next_level: 'alert("Yay! You won! Reloading map.");game.load_map(map);',
                death: 'alert("You died!");game.load_map(map);',
                unlock: 'game.current_map.keys[10].solid = 0;game.current_map.keys[10].colour = "#888";'
            }
            };

            /* Clarity engine */

            var Clarity = function () {

            this.alert_errors   = false;
            this.log_info       = true;
            this.tile_size      = 16;
            this.limit_viewport = false;
            this.jump_switch    = 0;

            this.viewport = {
                x: 200,
                y: 200
            };

            this.camera = {
                x: 0,
                y: 0
            };

            this.key = {
                left: false,
                right: false,
                up: false
            };

            this.player = {

                loc: {
                    x: 0,
                    y: 0
                },
                
                vel: {
                    x: 0,
                    y: 0
                },
                
                can_jump: true
            };

            window.onkeydown = this.keydown.bind(this);
            window.onkeyup   = this.keyup.bind(this);
            };

            Clarity.prototype.error = function (message) {

            if (this.alert_errors) alert(message);
            if (this.log_info) console.log(message);
            };

            Clarity.prototype.log = function (message) {

            if (this.log_info) console.log(message);
            };

            Clarity.prototype.set_viewport = function (x, y) {

            this.viewport.x = x;
            this.viewport.y = y;
            };

            Clarity.prototype.keydown = function (e) {

            var _this = this;

            switch (e.keyCode) {
            case 37:
                _this.key.left = true;
                break;
            case 38:
                _this.key.up = true;
                break;
            case 39:
                _this.key.right = true;
                break;
            }
            };

            Clarity.prototype.keyup = function (e) {

            var _this = this;

            switch (e.keyCode) {
            case 37:
                _this.key.left = false;
                break;
            case 38:
                _this.key.up = false;
                break;
            case 39:
                _this.key.right = false;
                break;
            }
            };

            Clarity.prototype.load_map = function (map) {

            if (typeof map      === 'undefined'
            || typeof map.data === 'undefined'
            || typeof map.keys === 'undefined') {

                this.error('Error: Invalid map data!');

                return false;
            }

            this.current_map = map;

            this.current_map.background = map.background || '#333';
            this.current_map.gravity = map.gravity || {x: 0, y: 0.3};
            this.tile_size = map.tile_size || 16;

            var _this = this;

            this.current_map.width = 0;
            this.current_map.height = 0;

            map.keys.forEach(function (key) {

                map.data.forEach(function (row, y) {
                    
                    _this.current_map.height = Math.max(_this.current_map.height, y);

                    row.forEach(function (tile, x) {
                        
                        _this.current_map.width = Math.max(_this.current_map.width, x);

                        if (tile == key.id)
                            _this.current_map.data[y][x] = key;
                    });
                });
            });

            this.current_map.width_p = this.current_map.width * this.tile_size;
            this.current_map.height_p = this.current_map.height * this.tile_size;

            this.player.loc.x = map.player.x * this.tile_size || 0;
            this.player.loc.y = map.player.y * this.tile_size || 0;
            this.player.colour = map.player.colour || '#000';

            this.key.left  = false;
            this.key.up    = false;
            this.key.right = false;

            this.camera = {
                x: 0,
                y: 0
            };

            this.player.vel = {
                x: 0,
                y: 0
            };

            this.log('Successfully loaded map data.');

            return true;
            };

            Clarity.prototype.get_tile = function (x, y) {

            return (this.current_map.data[y] && this.current_map.data[y][x]) ? this.current_map.data[y][x] : 0;
            };

            Clarity.prototype.draw_tile = function (x, y, tile, context) {

            if (!tile || !tile.colour) return;

            context.fillStyle = tile.colour;
            context.fillRect(
                x,
                y,
                this.tile_size,
                this.tile_size
            );
            };

            Clarity.prototype.draw_map = function (context, fore) {

            for (var y = 0; y < this.current_map.data.length; y++) {

                for (var x = 0; x < this.current_map.data[y].length; x++) {

                    if ((!fore && !this.current_map.data[y][x].fore) || (fore && this.current_map.data[y][x].fore)) {

                        var t_x = (x * this.tile_size) - this.camera.x;
                        var t_y = (y * this.tile_size) - this.camera.y;
                        
                        if(t_x < -this.tile_size
                        || t_y < -this.tile_size
                        || t_x > this.viewport.x
                        || t_y > this.viewport.y) continue;
                        
                        this.draw_tile(
                            t_x,
                            t_y,
                            this.current_map.data[y][x],
                            context
                        );
                    }
                }
            }

            if (!fore) this.draw_map(context, true);
            };

            Clarity.prototype.move_player = function () {

            var tX = this.player.loc.x + this.player.vel.x;
            var tY = this.player.loc.y + this.player.vel.y;

            var offset = Math.round((this.tile_size / 2) - 1);

            var tile = this.get_tile(
                Math.round(this.player.loc.x / this.tile_size),
                Math.round(this.player.loc.y / this.tile_size)
            );
            
            if(tile.gravity) {
                
                this.player.vel.x += tile.gravity.x;
                this.player.vel.y += tile.gravity.y;
                
            } else {
                
                this.player.vel.x += this.current_map.gravity.x;
                this.player.vel.y += this.current_map.gravity.y;
            }

            if (tile.friction) {

                this.player.vel.x *= tile.friction.x;
                this.player.vel.y *= tile.friction.y;
            }

            var t_y_up   = Math.floor(tY / this.tile_size);
            var t_y_down = Math.ceil(tY / this.tile_size);
            var y_near1  = Math.round((this.player.loc.y - offset) / this.tile_size);
            var y_near2  = Math.round((this.player.loc.y + offset) / this.tile_size);

            var t_x_left  = Math.floor(tX / this.tile_size);
            var t_x_right = Math.ceil(tX / this.tile_size);
            var x_near1   = Math.round((this.player.loc.x - offset) / this.tile_size);
            var x_near2   = Math.round((this.player.loc.x + offset) / this.tile_size);

            var top1    = this.get_tile(x_near1, t_y_up);
            var top2    = this.get_tile(x_near2, t_y_up);
            var bottom1 = this.get_tile(x_near1, t_y_down);
            var bottom2 = this.get_tile(x_near2, t_y_down);
            var left1   = this.get_tile(t_x_left, y_near1);
            var left2   = this.get_tile(t_x_left, y_near2);
            var right1  = this.get_tile(t_x_right, y_near1);
            var right2  = this.get_tile(t_x_right, y_near2);


            if (tile.jump && this.jump_switch > 15) {

                this.player.can_jump = true;
                
                this.jump_switch = 0;
                
            } else this.jump_switch++;

            this.player.vel.x = Math.min(Math.max(this.player.vel.x, -this.current_map.vel_limit.x), this.current_map.vel_limit.x);
            this.player.vel.y = Math.min(Math.max(this.player.vel.y, -this.current_map.vel_limit.y), this.current_map.vel_limit.y);

            this.player.loc.x += this.player.vel.x;
            this.player.loc.y += this.player.vel.y;

            this.player.vel.x *= .9;

            if (left1.solid || left2.solid || right1.solid || right2.solid) {

                /* fix overlap */

                while (this.get_tile(Math.floor(this.player.loc.x / this.tile_size), y_near1).solid
                    || this.get_tile(Math.floor(this.player.loc.x / this.tile_size), y_near2).solid)
                    this.player.loc.x += 0.1;

                while (this.get_tile(Math.ceil(this.player.loc.x / this.tile_size), y_near1).solid
                    || this.get_tile(Math.ceil(this.player.loc.x / this.tile_size), y_near2).solid)
                    this.player.loc.x -= 0.1;

                /* tile bounce */

                var bounce = 0;

                if (left1.solid && left1.bounce > bounce) bounce = left1.bounce;
                if (left2.solid && left2.bounce > bounce) bounce = left2.bounce;
                if (right1.solid && right1.bounce > bounce) bounce = right1.bounce;
                if (right2.solid && right2.bounce > bounce) bounce = right2.bounce;

                this.player.vel.x *= -bounce || 0;
                
            }

            if (top1.solid || top2.solid || bottom1.solid || bottom2.solid) {

                /* fix overlap */
                
                while (this.get_tile(x_near1, Math.floor(this.player.loc.y / this.tile_size)).solid
                    || this.get_tile(x_near2, Math.floor(this.player.loc.y / this.tile_size)).solid)
                    this.player.loc.y += 0.1;

                while (this.get_tile(x_near1, Math.ceil(this.player.loc.y / this.tile_size)).solid
                    || this.get_tile(x_near2, Math.ceil(this.player.loc.y / this.tile_size)).solid)
                    this.player.loc.y -= 0.1;

                /* tile bounce */
                
                var bounce = 0;
                
                if (top1.solid && top1.bounce > bounce) bounce = top1.bounce;
                if (top2.solid && top2.bounce > bounce) bounce = top2.bounce;
                if (bottom1.solid && bottom1.bounce > bounce) bounce = bottom1.bounce;
                if (bottom2.solid && bottom2.bounce > bounce) bounce = bottom2.bounce;
                
                this.player.vel.y *= -bounce || 0;

                if ((bottom1.solid || bottom2.solid) && !tile.jump) {
                    
                    this.player.on_floor = true;
                    this.player.can_jump = true;
                }
                
            }

            // adjust camera

            var c_x = Math.round(this.player.loc.x - this.viewport.x/2);
            var c_y = Math.round(this.player.loc.y - this.viewport.y/2);
            var x_dif = Math.abs(c_x - this.camera.x);
            var y_dif = Math.abs(c_y - this.camera.y);

            if(x_dif > 5) {
                
                var mag = Math.round(Math.max(1, x_dif * 0.1));

                if(c_x != this.camera.x) {
                    
                    this.camera.x += c_x > this.camera.x ? mag : -mag;
                    
                    if(this.limit_viewport) {
                        
                        this.camera.x = 
                            Math.min(
                                this.current_map.width_p - this.viewport.x + this.tile_size,
                                this.camera.x
                            );
                        
                        this.camera.x = 
                            Math.max(
                                0,
                                this.camera.x
                            );
                    }
                }
            }

            if(y_dif > 5) {
                
                var mag = Math.round(Math.max(1, y_dif * 0.1));
                
                if(c_y != this.camera.y) {
                    
                    this.camera.y += c_y > this.camera.y ? mag : -mag;
                
                    if(this.limit_viewport) {
                        
                        this.camera.y = 
                            Math.min(
                                this.current_map.height_p - this.viewport.y + this.tile_size,
                                this.camera.y
                            );
                        
                        this.camera.y = 
                            Math.max(
                                0,
                                this.camera.y
                            );
                    }
                }
            }

            if(this.last_tile != tile.id && tile.script) {

                eval(this.current_map.scripts[tile.script]);
            }

            this.last_tile = tile.id;
            };

            Clarity.prototype.update_player = function () {

            if (this.key.left) {

                if (this.player.vel.x > -this.current_map.vel_limit.x)
                    this.player.vel.x -= this.current_map.movement_speed.left;
            }

            if (this.key.up) {

                if (this.player.can_jump && this.player.vel.y > -this.current_map.vel_limit.y) {
                    
                    this.player.vel.y -= this.current_map.movement_speed.jump;
                    this.player.can_jump = false;
                }
            }

            if (this.key.right) {

                if (this.player.vel.x < this.current_map.vel_limit.x)
                    this.player.vel.x += this.current_map.movement_speed.left;
            }

            this.move_player();
            };

            Clarity.prototype.draw_player = function (context) {

            context.fillStyle = this.player.colour;

            context.beginPath();

            context.arc(
                this.player.loc.x + this.tile_size / 2 - this.camera.x,
                this.player.loc.y + this.tile_size / 2 - this.camera.y,
                this.tile_size / 2 - 1,
                0,
                Math.PI * 2
            );

            context.fill();
            };

            Clarity.prototype.update = function () {

            this.update_player();
            };

            Clarity.prototype.draw = function (context) {

            this.draw_map(context, false);
            this.draw_player(context);
            };

            /* Setup of the engine */

            window.requestAnimFrame =
            window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame ||
            window.msRequestAnimationFrame ||
            function(callback) {
            return window.setTimeout(callback, 1000 / 60);
            };

            var canvas = document.getElementById('canvas'),
            ctx = canvas.getContext('2d');

            canvas.width = 400;
            canvas.height = 400;

            var game2 = new Clarity();
            game2.set_viewport(canvas.width, canvas.height);
            game2.load_map(map);

            /* Limit the viewport to the confines of the map */
            game2.limit_viewport = true;

            var Loop = function() {

            ctx.fillStyle = '#333';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            game2.update();
            game2.draw(ctx);

            window.requestAnimFrame(Loop);
            };

            Loop();
        </script>



        <canvas id="SnakeGame" width="400" height="400"></canvas>
        <script>
            class SnakeGame {
            constructor() {
                this.canvas = document.getElementById('SnakeGame');
                this.context = this.canvas.getContext('2d');
                
                // Basılan tuşları algılıyoruz:
                document.addEventListener('keydown', this.onKeyPress.bind(this));
            }

            init() {
                // Yeni oyun için ilk değer atamaları:
                this.positionX = this.positionY = 10;
                this.appleX = this.appleY = 5;
                this.tailSize = 5;
                this.trail = [];
                this.gridSize = this.tileCount = 20;
                this.velocityX = this.velocityY = 0;

                // Oyun döngümüz çalışmaya başlıyor.
                // Her saniyede 15 kez çalışacak, yani 15 FPS olacak.
                // Üç boyutlu çok daha büyük oyunlar genelde 60 FPS üzerinde çalışıyor.
                this.timer = setInterval(this.loop.bind(this), 1000 / 15);
            }

            reset() {
                // Oyun göngüsünü durdur:
                clearInterval(this.timer);
                
                // Oyun ile alakalı detayları en baştaki haline geri döndür:
                this.init();
            }

            // Oyun döngümüz
            loop() {
                // Matematiksel hesaplamaları yap:
                this.update();
                
                // Sonrasında ekrana çizimi gerçekleştir
                this.draw();
            }

            update() {
                // Yılanın başını X ve Y koordinat düzleminde gittiği yöne hareket ettir
                this.positionX += this.velocityX;
                this.positionY += this.velocityY;

                // Yılan sağ, sol, üst ya da alt kenarlara değdi mi?
                // Değdiyse ekranın diğer tarafından devam ettir
                if (this.positionX < 0) {
                this.positionX = this.tileCount - 1;
                } else if (this.positionY < 0) {
                this.positionY = this.tileCount - 1;
                } else if (this.positionX > this.tileCount - 1) {
                this.positionX = 0;
                } else if (this.positionY > this.tileCount - 1) {
                this.positionY = 0;
                }

                // Yılan kendi üstüne bastı mı?
                this.trail.forEach(t => {
                if (this.positionX === t.positionX && this.positionY === t.positionY) {
                    // Bastıysa game over olduk, oyunu resetle:
                    this.reset();
                }
                });

                // Yılanın başını yılanın herbir karesini hafızada tuttuğumuz diziye koy
                this.trail.push({positionX: this.positionX, positionY: this.positionY});

                // Yılanın başını hareket ettirdik, şimdi kuyruktan kırpmamız gerekiyor
                while (this.trail.length > this.tailSize) {
                this.trail.shift();
                }

                // Yılan elma yedi mi?
                if (this.appleX === this.positionX && this.appleY === this.positionY) {
                // Yediyse yılanın boyutu uzat:
                this.tailSize++;
                
                // Ekrana yeni bir elma koymak lazım.
                // Rasgele X ve Y koordinatı üretip oraya elmayı atalım:
                this.appleX = Math.floor(Math.random() * this.tileCount);
                this.appleY = Math.floor(Math.random() * this.tileCount);
                }
            }

            // Ekrana çizim gerçekleştiriyor:
            draw() {
                // İlk olarak siyah arkaplanı çiziyoruz
                this.context.fillStyle = 'black';
                this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // Skoru ekranın sol üst köşesine yazdıralım
                this.context.fillStyle = 'white';
                this.context.font = '20px Arial';
                this.context.fillText(this.tailSize - 5, 20, 40);

                // Yılanın herbir karesini sırayla ekrana çiziyoruz
                this.context.fillStyle = 'yellow';
                this.trail.forEach(t => {
                this.context.fillRect(t.positionX * this.gridSize, t.positionY * this.gridSize, this.gridSize - 5, this.gridSize - 5);
                });

                // Son olarak elmayı ekrana çizdirelim:
                this.context.fillStyle = 'pink';
                this.context.fillRect(this.appleX * this.gridSize, this.appleY * this.gridSize, this.gridSize - 5, this.gridSize - 5);
            }

            // Kullanıcı websayfasındayken bir tuşa bastığında çağrılıyor:
            onKeyPress(e) {
                // Kullanıcı sol oka bastı, yılan sağa gitmiyorsa yılanı sola döndür
                if (e.keyCode === 37 && this.velocityX !== 1) {
                this.velocityX = -1;
                this.velocityY = 0;
                }
                
                // Kullanıcı yukarı oka bastı, yılan aşağı gitmiyorsa yılanı yukarı döndür
                else if (e.keyCode === 38 && this.velocityY !== 1) {
                this.velocityX = 0;
                this.velocityY = -1;
                }
                
                // Kullanıcı sağ oka bastı, yılan sola gitmiyorsa yılanı sağa döndür
                else if (e.keyCode === 39 && this.velocityX !== -1) {
                this.velocityX = 1;
                this.velocityY = 0;
                }
                
                // Kullanıcı aşağı oka bastı, yılan yukarı gitmiyorsa yılanı aşağı döndür
                if (e.keyCode === 40 && this.velocityY !== -1) {
                this.velocityX = 0
                this.velocityY = 1;
                }
            }
            }

            // Yeni oyun oluştur:
            const game = new SnakeGame();
            
            // Sayfa yüklendiğinde oyunu oynanabilir hale getir:
            window.onload = () => game.init();
        </script>



        <div class="containerChess">
            <div class="extra-zone">
            <div class="captured-zone" id="czblack"></div>
            <div class="countdown-timer" id="ctblack">05:00</div>
            </div>
            <div class="chessboard">
            <div class="line l8">
                <div class="square c1">
                <div class="black rook">♜</div>
                </div>
                <div class="square c2">
                <div class="black knight">♞</div>
                </div>
                <div class="square c3">
                <div class="black bishop">♝</div>
                </div>
                <div class="square c4">
                <div class="black queen">♛</div>
                </div>
                <div class="square c5">
                <div class="black king">♚</div>
                </div>
                <div class="square c6">
                <div class="black bishop">♝</div>
                </div>
                <div class="square c7">
                <div class="black knight">♞</div>
                </div>
                <div class="square c8">
                <div class="black rook">♜</div>
                </div>
            </div>
            <div class="line l7">
                <div class="square c1">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c2">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c3">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c4">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c5">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c6">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c7">
                <div class="black pawn">♟</div>
                </div>
                <div class="square c8">
                <div class="black pawn">♟</div>
                </div>
            </div>
            <div class="line l6">
                <div class="square c1"></div>
                <div class="square c2"></div>
                <div class="square c3"></div>
                <div class="square c4"></div>
                <div class="square c5"></div>
                <div class="square c6"></div>
                <div class="square c7"></div>
                <div class="square c8"></div>
            </div>
            <div class="line l5">
                <div class="square c1"></div>
                <div class="square c2"></div>
                <div class="square c3"></div>
                <div class="square c4"></div>
                <div class="square c5"></div>
                <div class="square c6"></div>
                <div class="square c7"></div>
                <div class="square c8"></div>
            </div>
            <div class="line l4">
                <div class="square c1"></div>
                <div class="square c2"></div>
                <div class="square c3"></div>
                <div class="square c4"></div>
                <div class="square c5"></div>
                <div class="square c6"></div>
                <div class="square c7"></div>
                <div class="square c8"></div>
            </div>
            <div class="line l3">
                <div class="square c1"></div>
                <div class="square c2"></div>
                <div class="square c3"></div>
                <div class="square c4"></div>
                <div class="square c5"></div>
                <div class="square c6"></div>
                <div class="square c7"></div>
                <div class="square c8"></div>
            </div>
            <div class="line l2">
                <div class="square c1">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c2">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c3">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c4">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c5">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c6">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c7">
                <div class="white pawn">♟</div>
                </div>
                <div class="square c8">
                <div class="white pawn">♟</div>
                </div>
            </div>
            <div class="line l1">
                <div class="square c1">
                <div class="white rook">♜</div>
                </div>
                <div class="square c2">
                <div class="white knight">♞</div>
                </div>
                <div class="square c3">
                <div class="white bishop">♝</div>
                </div>
                <div class="square c4">
                <div class="white queen">♛</div>
                </div>
                <div class="square c5">
                <div class="white king">♚</div>
                </div>
                <div class="square c6">
                <div class="white bishop">♝</div>
                </div>
                <div class="square c7">
                <div class="white knight">♞</div>
                </div>
                <div class="square c8">
                <div class="white rook">♜</div>
                </div>
            </div>
            </div>
            <div class="extra-zone">
            <div class="captured-zone" id="czwhite"></div>
            <div class="countdown-timer" id="ctwhite">05:00</div>
            </div>
        </div>
        
        <script>
            function otherColor(color) {
        return color === "white" ? "black" : "white";
        }

        function enableDrag(chessPiece) {
        chessPiece.setAttribute("draggable", true);
        chessPiece.classList.add("draggable");
        }

        function disableDrag(chessPiece) {
        chessPiece.setAttribute("draggable", false);
        chessPiece.classList.remove("draggable");
        }

        function disableAll(...colors) {
        colors.forEach(color => {
            const chessPieces = document.querySelectorAll(`.${color}`);
            chessPieces.forEach(chessPiece => disableDrag(chessPiece));
        });
        }

        function disableAndEnablePieces(currColor, nextColor) {

        const currTurn = document.querySelectorAll(`.${currColor}`);
        currTurn.forEach(chessPiece => disableDrag(chessPiece));

        const nextTurn = document.querySelectorAll(`.${nextColor}`);
        nextTurn.forEach(chessPiece => enableDrag(chessPiece));
        }

        function applyPropOneChessPiece(chessPiece, chessboardPosition) {

        const chessPiecesProp = ["pawn", 0, 2, 0,
                                "rook", 7, 7, 0,
                                "knight", [1, 2], [2, 1], 0,
                                "bishop", 0, 0, 7,
                                "queen", 7, 7, 7,
                                "king", 1, 1, 1];

        const createPieceParams = (el, local, h, v, d) => el.piece = { local, h, v, d };

        const nameChessPiece = chessPiece.classList[1];
        const indexInProps = chessPiecesProp.indexOf(nameChessPiece);
        const pieceProps = [chessPiecesProp[indexInProps + 1],
                            chessPiecesProp[indexInProps + 2],
                            chessPiecesProp[indexInProps + 3]];

        createPieceParams(chessPiece, chessboardPosition,
            pieceProps[0], pieceProps[1], pieceProps[2]);

        }

        function applyPropChessPieces(piecesColor, chessboardPosition) {

        const chessPiecesClass = document.querySelectorAll(`.${piecesColor}`);
        chessPiecesClass.forEach(chessPiece => {
            applyPropOneChessPiece(chessPiece, chessboardPosition);
        });

        }

        function clearZonesByClassName(...classNames) {
        classNames.forEach(className => {
            const zones = document.querySelectorAll(`.${className}`);
            const removeClassName = className.split(".");
            zones.forEach(zone => zone.classList.remove(removeClassName[0]));
        });
        }

        const searchSquares = function (maxValue, currLine, lSign, currCol, cSign, color) {
            
        for (let i = 1; i <= maxValue; i++) {

            const line = document.getElementsByClassName(`l${currLine + lSign * i}`)[0];

            if (line) {
            const square = line.getElementsByClassName(`c${currCol + cSign * i}`)[0];

            if (square) {
                if (square.firstElementChild) {
                if (square.firstElementChild.classList[0] !== color) {
                    square.classList.add("capture");
                }
                break;
                }
                square.classList.add("dropzone");
            }
            }
        }
        }

        const showPossibleDropZones = function (el) {
        
        clearZonesByClassName("dropzone", "capture");

        const elColor = el.classList[0];

        const getCurrentLocation = parent => parseInt(parent.classList[1].split("")[1]);

        const column = getCurrentLocation(el.parentNode);
        const line = getCurrentLocation(el.parentNode.parentNode);

        const squaresInBack = (curr, moves) => curr - moves < 1 ? (curr - 1) : moves;
        const squaresInFront = (curr, moves) => curr + moves > 8 ? (8 - curr) : moves;

        if (!el.piece.v.length && el.piece.v > 0 && !el.classList.contains("pawn")) {
            // Check vertical squares
            const maxSouth = squaresInBack(line, el.piece.v);
            searchSquares(maxSouth, line, -1, column, 0, elColor);

            const maxNorth = squaresInFront(line, el.piece.v);  
            searchSquares(maxNorth, line, +1, column, 0, elColor);
        }

        if (!el.piece.h.length && el.piece.h > 0) {
            // Check horizontal squares
            const maxWest = squaresInBack(column, el.piece.h);
            searchSquares(maxWest, line, 0, column, -1, elColor);

            const maxEast = squaresInFront(column, el.piece.h);
            searchSquares(maxEast, line, 0, column, +1, elColor);
        }

        if (el.classList.contains("knight")) {
            // Check squares for L moves
            const sign = [-1, +1];

            for (let i = 0; i < el.piece.v.length; i++) {
            for (let j = 0; j < sign.length; j++) {
                for (let k = 0; k < sign.length; k++) {
                searchSquares(1, line, sign[j] * el.piece.v[i], column, sign[k] * el.piece.h[i], elColor);
                searchSquares(1, line, sign[j] * el.piece.v[i], column, sign[k] * el.piece.h[i], elColor);
                }
            }
            }
        }

        if (el.piece.d > 0) {
            // Check diagonal squares
            const maxSouth = squaresInBack(line, el.piece.d);
            searchSquares(maxSouth, line, -1, column, -1, elColor);
            searchSquares(maxSouth, line, -1, column, +1, elColor);

            const maxNorth = squaresInFront(line, el.piece.d);
            searchSquares(maxNorth, line, +1, column, -1, elColor);
            searchSquares(maxNorth, line, +1, column, +1, elColor);
        }

        if (el.classList.contains("pawn")) {
            
            if(el.piece.local === "top") {
            const maxDiag = squaresInBack(line, 1);
            searchSquares(maxDiag, line, -1, column, -1, elColor);
            searchSquares(maxDiag, line, -1, column, +1, elColor);
            clearZonesByClassName("dropzone");

            const maxSouth = squaresInBack(line, el.piece.v);
            searchSquares(maxSouth, line, -1, column, 0, elColor);
            clearZonesByClassName(`capture.c${column}`);
            
            } else {
            const maxDiag = squaresInBack(line, 1);
            searchSquares(maxDiag, line, +1, column, -1, elColor);
            searchSquares(maxDiag, line, +1, column, +1, elColor);
            clearZonesByClassName("dropzone");

            const maxNorth = squaresInFront(line, el.piece.v);
            searchSquares(maxNorth, line, +1, column, 0, elColor);
            clearZonesByClassName(`capture.c${column}`);
            }
        }
        }

        function checkDropZones(event) {
        
        const changeDropZones = function (target) {
            const classList = target.classList;

            if (classList.contains("dragover")) {
            classList.remove("dragover");
            } else {
            classList.add("dragover");
            }
        }

        const target = event.target;
        const classList = target.classList;
        const parentClassList = target.parentNode.classList;

        if (classList.contains("dropzone")) {
            changeDropZones(target);
            return target;
        } else if (parentClassList) {
            if (parentClassList.contains("capture")) {
            changeDropZones(target.parentNode);
            return target.parentNode;
            }
        } else {
            return;
        }
        }

        function movePiece(chessPiece, currPosition, nextPosition) {
        currPosition.removeChild(chessPiece);
        nextPosition.appendChild(chessPiece);
        }


        function captureOpponentPiece(currSquare, pieceColor) {
        // Check if drop occurs with a capture
        if (currSquare.firstElementChild) {

            const capturedPiece = currSquare.firstElementChild;
            disableDrag(capturedPiece);
            
            const capturedZone = document.getElementById(`cz${pieceColor}`);
            movePiece(capturedPiece, currSquare, capturedZone);
            
            return capturedPiece.classList.contains("king");

        }
        
        return false;

        }


        function checkmate(chessPiece, color) {
        
        showPossibleDropZones(chessPiece);
        const captureSquares = document.getElementsByClassName("capture");
        const opponentColor = otherColor(color);
        
        for (let i = 0; i < captureSquares.length; i++) {
            
            const possibleCapture = captureSquares[i].firstElementChild;
            const isCheckmate = possibleCapture.classList.contains("king") &&
                possibleCapture.classList.contains(opponentColor);
            
            if (isCheckmate) {
            return isCheckmate;
            }

        }
        
        return false;
        
        }

        function playerTurn(color) {

        const countdownTimer = document.getElementById(`ct${color}`);
        const time = countdownTimer.innerHTML;
        let minutes = parseInt(time.split(":")[0]);
        let seconds = parseInt(time.split(":")[1]);

        let timer;

        function turn() {

            seconds--;

            if (seconds < 0) {
            seconds = 59;
            minutes--;
            }

            if (minutes < 0) {
            clearInterval(timer);
            endGame(color, true);
            } else {

            let minutesStr = `${minutes}`;
            minutesStr = minutesStr.length < 2 ? "0" + minutesStr : minutesStr;

            let secondsStr = `${seconds}`;
            secondsStr = secondsStr.length < 2 ? "0" + secondsStr : secondsStr;

            countdownTimer.innerHTML = `${minutesStr}:${secondsStr}`;
            }

        }
        
        return {
            start() {
            timer = setInterval(turn, 1000)
            },
            stop() {
            clearInterval(timer)
            }
        }

        }

        /* 
        Main
        */

        applyPropChessPieces("white", "bottom");
        applyPropChessPieces("black", "top");
        let draggedPiece = null;

        const whiteTurn = playerTurn("white");
        const blackTurn = playerTurn("black");

        const startDelay = setTimeout(() => {
        whiteTurn.start();
        disableAndEnablePieces("black", "white");
        }, 3000);


        function endGame(color, endedByTime) {

        whiteTurn.stop();
        blackTurn.stop();
        disableAll("white", "black");

        if (endedByTime) {
            const opponentColor = otherColor(color);
            alert(`${opponentColor.toUpperCase()} WINS!!!`);
        } else {
            alert(`${color.toUpperCase()} WINS!!!`);
        }

        }

        function changeTurn(color, isCheckmate, isKingCaptured) {
        
        if (isKingCaptured) {
            endGame(color, false);

        } else {

            let justKing = "";
            if (isCheckmate) {
            justKing = ".king";
            }

            if (color === "white") {

            whiteTurn.stop();
            blackTurn.start();
            disableAndEnablePieces("white", `black${justKing}`);

            } else if (color === "black") {

            blackTurn.stop();
            whiteTurn.start();
            disableAndEnablePieces("black", `white${justKing}`);

            }

        }

        }

        function verifyCheckmateAndChangeTurn(chessPiece, pieceColor, isKingCaptured) {
        const isCheckmate = checkmate(chessPiece, pieceColor);
        changeTurn(pieceColor, isCheckmate, isKingCaptured);
        clearZonesByClassName("dropzone", "capture");
        }

        function applyPawnExceptions(chessPiece, currSquare, pieceColor, isKingCaptured) {
        // Update pawn movement 
        chessPiece.piece.v = 1;

        // Check if pawn arrived at the other side of the chessboard
        const chessboardSide = chessPiece.piece.local;
        const opponentSide = chessboardSide === "bottom" ? "l8" : "l1";

        if (currSquare.parentNode.classList.contains(opponentSide)) {

            let dropDownSelector = '<div id="piece-selector">';
            dropDownSelector += '<a name="knight">♞</a>';
            dropDownSelector += '<a name="queen">♛</a>';
            dropDownSelector += '<a name="rook">♜</a>';
            dropDownSelector += '<a name="bishop">♝</a>';
            dropDownSelector += '</div>';

            currSquare.innerHTML = dropDownSelector;

            const pieceSelector = document.getElementById("piece-selector");
            pieceSelector.style.color = pieceColor;

            pieceSelector.addEventListener("click", e => {
            const chosenPieceName = e.target.name;
            const chosenPiece = e.target.innerHTML;

            let newPiece = `<div class=`;
            newPiece += `"${pieceColor} ${chosenPieceName}">`;
            newPiece += `${chosenPiece}</div>`;

            currSquare.innerHTML = newPiece;

            applyPropOneChessPiece(currSquare.firstElementChild, chessboardSide);

            verifyCheckmateAndChangeTurn(currSquare.firstElementChild, pieceColor, isKingCaptured);

            });
        } else {
            verifyCheckmateAndChangeTurn(chessPiece, pieceColor, isKingCaptured);
        }

        }

        function finishMove(event, selectedPiece) {
        const target = checkDropZones(event);
        
        if (target) {

            const pieceColor = selectedPiece.classList[0];

            const isKingCaptured = captureOpponentPiece(target, pieceColor);

            movePiece(selectedPiece, selectedPiece.parentNode, target);
            
            if (selectedPiece.classList.contains("pawn")) {
            applyPawnExceptions(selectedPiece, target, pieceColor, isKingCaptured);
            } else {
            verifyCheckmateAndChangeTurn(selectedPiece, pieceColor, isKingCaptured);
            }
            
            selectedPiece.classList.remove("dragging");
            target.classList.remove("dragover");
            
        }
        
        clearZonesByClassName("dropzone", "capture");
        }


        /* Event Listeners */
        document.addEventListener("click", event => {
        if (event.target.draggable) {
            if (event.target !== draggedPiece) {
            draggedPiece = event.target;
            showPossibleDropZones(draggedPiece);
            }
        } else {
            finishMove(event, draggedPiece);
            draggedPiece = null;
        }
        });

        document.addEventListener("dragstart", event => {
        if (event.target.draggable) {
            draggedPiece = event.target;
            showPossibleDropZones(draggedPiece);
            draggedPiece.classList.add("dragging");
        }
        });

        document.addEventListener("dragover", event => {
        event.preventDefault();
        }, false);

        document.addEventListener("dragenter", checkDropZones);

        document.addEventListener("dragleave", checkDropZones);

        document.addEventListener("drop", event => {
        event.preventDefault();
        finishMove(event, draggedPiece);
        draggedPiece = null;
        });
        </script>
   </body>
</html>
